{
    "version": "https://jsonfeed.org/version/1",
    "title": "null • All posts by \"计算机网络\" category",
    "description": "Maple的编程学习",
    "home_page_url": "https://maplelearc.github.io",
    "items": [
        {
            "id": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E6%A6%82%E8%BF%B0/",
            "url": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E6%A6%82%E8%BF%B0/",
            "title": "《计算机网络：自定向下》第一章：概述",
            "date_published": "2022-10-03T10:32:49.693Z",
            "content_html": "<h1 id=\"第一章概述\"><a class=\"markdownIt-Anchor\" href=\"#第一章概述\">#</a> 第一章：概述</h1>\n<h3 id=\"1-介绍\"><a class=\"markdownIt-Anchor\" href=\"#1-介绍\">#</a> 1. 介绍</h3>\n<ul>\n<li>\n<p>TCP：传输控制协议。提供面向连接的服务。基于 TCP 的传输可靠性高，能够传输准确、完整的信息，但是信息的实时性有失准确。</p>\n</li>\n<li>\n<p>UDP：用户数据报协议。提供无连接的服务。基于 UDP 的传输能够传输实时信息，信息不会产生延迟，但是信息的可靠性不高。</p>\n</li>\n<li>\n<p>协议：对等层实体在通信过程中应该遵守的规则和集合，包括语法、语义和时序。控制接收、发送信息</p>\n</li>\n<li>\n<p>ISP：网络服务提供商</p>\n</li>\n<li>\n<p>套接字接口 (Socket interface): 因特网发送程序必须遵守的规则集合。规定了两个不同端系统的两个程序在因特网基础设施交互数据的方式。</p>\n</li>\n<li>\n<p>互联网子系统：网络核心、网络边缘、网络的接入</p>\n</li>\n<li>\n<p>网络边缘由接入网连接到网络核心，从而能够完成不同端系统之间的信息交互，网络核心起到数据交换的作用。</p>\n</li>\n</ul>\n<h3 id=\"2-网络边缘\"><a class=\"markdownIt-Anchor\" href=\"#2-网络边缘\">#</a> 2. 网络边缘</h3>\n<ul>\n<li>\n<p>端系统：通常把与因特网相连的计算机和其他设备被称为端系统，处于因特网边缘，被称为端系统，也称为主机，主机容纳 (运行) 应用程序。主机又被分为：客户端和服务器。</p>\n</li>\n<li>\n<p>网络边缘作用：运行应用程序。</p>\n</li>\n<li>\n<p>客户段 / 服务器（C/S）模式：客户向服务器请求、接收服务。资源全部储存在服务器中。</p>\n<blockquote>\n<ul>\n<li>服务器先运行，客户端后启动。客户端主动请求，服务器被动接收。</li>\n<li>C/S 模式的可拓展性差，服务器达到一定阈值时，服务器性能断崖式下降，服务器接收不了请求。</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p>对等 (peer to peer (p2p)) 模式</p>\n<blockquote>\n<ul>\n<li>没有专门的服务器，每个节点既可以是客户端也可以是服务器，都统称为端系统</li>\n<li>在一个端系统需要资源时，向其他已经建立连接、且拥有所请求资源片段的端系统发送资源请求，再整合获取的资源片段从而获得完整的资源</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p>网络边缘：采用网络设施的面向连接服务</p>\n<blockquote>\n<ul>\n<li>\n<p>目标：在端系统之间传输数据</p>\n</li>\n<li>\n<p>握手：在传输数据之前做好准备</p>\n<blockquote>\n<ul>\n<li>两个通信主机之间为连接建立状态</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p>TCP (Transmission Control Protocol):Internet 上的面向连接服务</p>\n</li>\n<li>\n<p>TCP 服务 (RFC 793)</p>\n<blockquote>\n<ul>\n<li>可靠地、按顺序地传送数据 —— 确认和重传</li>\n<li>流量控制 —— 发送不会淹没接收方</li>\n<li>拥塞控制 —— 当网络拥塞时，发送方降低发送速率</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"3-网络核心路由器的网状网络\"><a class=\"markdownIt-Anchor\" href=\"#3-网络核心路由器的网状网络\">#</a> 3. 网络核心：路由器的网状网络</h3>\n<h4 id=\"1-电路交换\"><a class=\"markdownIt-Anchor\" href=\"#1-电路交换\">#</a> 1. 电路交换</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319152750578.png\" alt=\"image-20220319152750578\"></p>\n</li>\n<li>\n<p>主机之间通过信令系统在通信之前建立起一条专用的通信通道，其他主机无法使用，易造成资源浪费，且连接建立时间长</p>\n</li>\n<li>\n<p>电路交换不适用于计算机之间的通信</p>\n<blockquote>\n<ul>\n<li>\n<p>连接建立时间长</p>\n</li>\n<li>\n<p>计算机之间的通信有突发性，如果使用线路交换，则浪费的片较多</p>\n<blockquote>\n<p>即使这个呼叫没有数据传递，其占据的片也不能够被别的呼叫使用</p>\n</blockquote>\n</li>\n<li>\n<p>可靠性不高</p>\n</li>\n</ul>\n</blockquote>\n<p>电路交换中的复用</p>\n<ol>\n<li>频分复用 (FDM)\n<ul>\n<li>在两个主机的通信链路的有效通信频率范围内，将有效频段划分为多片小的频段，在通信时，每个主机在有效频率范围内，找到有空的一个频段。</li>\n</ul>\n</li>\n<li>时分复用 (TDM)\n<ul>\n<li>将时间划分为固定时间的多个帧，再将每个帧划分为相同的固定数量的时隙。在进行连接时，网络为其连接在每个帧中指定一个时隙。</li>\n</ul>\n</li>\n<li>波分复用 (WDM): 用于光纤通信\n<ul>\n<li>将主机通信之间的有效波段分为许多相同的更小的波段，每个用户使用其中的一个小波段</li>\n</ul>\n</li>\n<li>码分复用 (CDM)</li>\n</ol>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319155836424.png\" alt=\"image-20220319155836424\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"2分组交换\"><a class=\"markdownIt-Anchor\" href=\"#2分组交换\">#</a> 2. 分组交换</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319160624991.png\" alt=\"image-20220319160624991\"></p>\n</li>\n<li>\n<p>不会造成网络资源浪费，网络是共享的</p>\n</li>\n<li>\n<p>分组发送与接受时间相同，分组交换的时间只能用发送或接收其中一个来计算。</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319163457589.png\" alt=\"image-20220319163457589\"></p>\n</li>\n<li>\n<p>存储转发时延：分组在到达分组交换机时，在此分组前还存在其他的分组先到达分组交换机，此分组只有在其他分组存储转发之后，才能够被分组交换机存储转发。</p>\n</li>\n<li>\n<p>排队时延：分组交换机的到达速率 &gt; 输出速率，分组将会进行排队等待传输，形成排队时延</p>\n</li>\n<li>\n<p>输出缓存 (输出队列): 分组交换机具有一个输出缓存，用于存储路由器准备发往下一条链路的分组</p>\n</li>\n<li>\n<p>分组丢失 (丢包)：输出缓存是有限的，当缓存被其他等待的分组充满时，将会出现分组被抛弃的情况，被称为分组丢失 (丢包)，到达的分组或在排队的分组之一将会被丢弃</p>\n</li>\n<li>\n<p>统计多路复用：主机之间的通信被分为多个片段，在不同的片段传输不同的分组，划分片段没有固定的模式</p>\n</li>\n<li>\n<p>分组交换网络：</p>\n<blockquote>\n<p>分组的存储转发一段一段从源端传到目标端，按照有无网络层的连接，分成：</p>\n<ul>\n<li>\n<p>数据报网络</p>\n<blockquote>\n<ul>\n<li>主机之间的交换节点不需要建立通信状态，主机之间不需要握手</li>\n<li>每个分组携带了目标主机的完整地址</li>\n<li>每个分组都独立路由 (路径不一样，可能会失序)</li>\n<li>路由器根据分组的目标地址进行路由</li>\n<li>类似：问路</li>\n<li>Internet</li>\n<li>面向无连接的</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p>虚电路网络</p>\n<blockquote>\n<ul>\n<li>主机之间握手，交换节点建立通信状态，建立起一条虚电路</li>\n<li>主机之间通过信令建立连接</li>\n<li>每个分组接待一个虚电路号</li>\n<li>每个分组按照虚电路号进行识别</li>\n<li>面向连接的</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"3-网络核心的关键功能\"><a class=\"markdownIt-Anchor\" href=\"#3-网络核心的关键功能\">#</a> 3. 网络核心的关键功能</h4>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319164935031.png\" alt=\"image-20220319164935031\"></p>\n<h4 id=\"4-分组交换-vs-电路交换\"><a class=\"markdownIt-Anchor\" href=\"#4-分组交换-vs-电路交换\">#</a> 4. 分组交换 VS 电路交换</h4>\n<ul>\n<li>\n<ol>\n<li>电路交换更具实时性</li>\n<li>分组交换提供更好的带宽</li>\n<li>分组交换更简单、更有效、成本更低</li>\n</ol>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220319170908764.png\" alt=\"image-20220319170908764\"></p>\n</li>\n<li>\n<p>分组交换适合于突发式数据传输</p>\n<ul>\n<li>能够资源共享</li>\n<li>简单，不必建立呼叫</li>\n</ul>\n</li>\n<li>\n<p>分组交换过度使用造成网络拥塞：分组延时和丢失</p>\n<ul>\n<li>对可靠地数据传输需要协议来约束：拥塞控制</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"4-接入网和物理媒介\"><a class=\"markdownIt-Anchor\" href=\"#4-接入网和物理媒介\">#</a> 4. 接入网和物理媒介</h3>\n<ul>\n<li>接入网：将端系统接入到网络核心，让不同端系统之间实现连接</li>\n</ul>\n<h4 id=\"1-住宅接入网络\"><a class=\"markdownIt-Anchor\" href=\"#1-住宅接入网络\">#</a> 1 . 住宅接入网络</h4>\n<h5 id=\"1-modem\"><a class=\"markdownIt-Anchor\" href=\"#1-modem\">#</a> (1). modem</h5>\n<blockquote>\n<ul>\n<li>将上网数据调制加载音频信号上，在电话线上传输，在局端将其中的数据调解出来；反之亦然；\n<ul>\n<li>调频：不同频持续不同时间，代表 0 或 1</li>\n<li>调幅：音频的幅度</li>\n<li>调相位</li>\n<li>综合调剂</li>\n</ul>\n</li>\n<li>拨号调制解调器 (modem)\n<ul>\n<li>调制解调解器，是调制器和解调器的缩写 ，一种<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTglQUUlQTElRTclQUUlOTclRTYlOUMlQkE=\">计算机</span>硬件 ，它能把计算机的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlOTUlQjAlRTUlQUQlOTclRTQlQkYlQTElRTUlOEYlQjcvOTE1NjYz\">数字信号</span>翻译成可沿普通<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclOTQlQjUlRTglQUYlOUQlRTclQkElQkYvMzEzMzk4Mg==\">电话线</span>传送的模拟信号，而这些模拟信号又可被线路另一端的另一个调制解调器接收，并译成计算机可懂的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTglQUYlQUQlRTglQTglODAvMjI5MTA5NQ==\">语言</span>。这一简单过程完成了两台计算机间的通信。</li>\n<li>56Kbps 的速率直接接入路由器 (通常更低)</li>\n<li>不能同时上网和打电话，不能同时在线，带宽窄</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h5 id=\"2dsldigital-subscriber-line\"><a class=\"markdownIt-Anchor\" href=\"#2dsldigital-subscriber-line\">#</a> (2).DSL(Digital Subscriber Line)</h5>\n<blockquote>\n<ul>\n<li>&lt;4KHz 以下用于语音的通讯，4KHz 以上较小部分为下行数据，较大部分为上行数据，用调制解调的方式控制上行数据和下行数据进行上网工作\n<ul>\n<li>上行数据：从终端节点向网络传送的数据</li>\n<li>下行数据：从网络上向终端节点传送的数据</li>\n</ul>\n</li>\n<li>采用现存到交换局 DSLAM 的电话线\n<ul>\n<li>DSL 线路上的数据被传到互联网</li>\n<li>DSL 线路上的语音被传到电话网</li>\n</ul>\n</li>\n<li>&lt;2.5 Mbps 上行传输速率 (typically &lt; 1 Mbps)</li>\n<li>&lt;24 Mbps 下行传输速率 (typically &lt; 10 Mbps)</li>\n<li>可以同时上网和通话</li>\n</ul>\n</blockquote>\n<h5 id=\"3-线缆网络\"><a class=\"markdownIt-Anchor\" href=\"#3-线缆网络\">#</a> (3). 线缆网络</h5>\n<blockquote>\n<ul>\n<li>有线电视信号线缆双向改造</li>\n<li>FDM：在不同频段传输不同信道的数据，数字电视和和上网数据 (上下行)</li>\n<li>一些带宽用于上行，一些用于上行，一些用于电话，一些用控制，一些用于数字广播</li>\n<li>HFC：Hybrid Fiber Coax\n<ul>\n<li>非对称：最高 30Mbps 的下行传输速率，2Mbps 上行传输速率</li>\n</ul>\n</li>\n<li>线缆和光纤网络将每个家庭用户接入到 ISP 路由器</li>\n<li>各用户共享到线缆头端的接入网络\n<ul>\n<li>与 DSL 不同，DSL 每个用户一个专用线路到 CO (Central Office)</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h5 id=\"4-电缆接入\"><a class=\"markdownIt-Anchor\" href=\"#4-电缆接入\">#</a> (4). 电缆接入</h5>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220320160500100.png\" alt=\"image-20220320160500100\"></li>\n</ul>\n</blockquote>\n<h4 id=\"2-企业接入网络\"><a class=\"markdownIt-Anchor\" href=\"#2-企业接入网络\">#</a> 2. 企业接入网络</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220322141323413.png\" alt=\"image-20220322141323413\"></li>\n</ul>\n</blockquote>\n<h4 id=\"3-无线接入网络\"><a class=\"markdownIt-Anchor\" href=\"#3-无线接入网络\">#</a> 3. 无线接入网络</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220322141620264.png\" alt=\"image-20220322141620264\"></li>\n</ul>\n</blockquote>\n<h4 id=\"4-物理媒体\"><a class=\"markdownIt-Anchor\" href=\"#4-物理媒体\">#</a> 4. 物理媒体</h4>\n<blockquote>\n<ul>\n<li>Bit：在传输 — 接收对间传播</li>\n<li>物理链路：在每个传输 — 接受对，跨越一种物理媒体</li>\n<li>导引型媒体：信号沿着固体媒介被导引：\n<ul>\n<li>同轴电缆</li>\n<li>光纤</li>\n<li>双绞线</li>\n</ul>\n</li>\n<li>非导引型媒体：信号自由传播\n<ul>\n<li>如无线电</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h5 id=\"1双绞线tp\"><a class=\"markdownIt-Anchor\" href=\"#1双绞线tp\">#</a> (1). 双绞线 (TP)</h5>\n<blockquote>\n<ul>\n<li>\n<p>两根绝缘铜线</p>\n</li>\n<li>\n<p>5 类：100Mbps Enthernet、Gbps 、以太网</p>\n</li>\n<li>\n<p>6 类：10Gbps</p>\n</li>\n</ul>\n</blockquote>\n<h5 id=\"2-同轴电缆\"><a class=\"markdownIt-Anchor\" href=\"#2-同轴电缆\">#</a> (2). 同轴电缆</h5>\n<blockquote>\n<ul>\n<li>两根同心的铜导线</li>\n<li>双向</li>\n<li>亟待电缆\n<ul>\n<li>电缆上一个单个信道</li>\n<li>Ethernet</li>\n</ul>\n</li>\n<li>宽带电缆\n<ul>\n<li>电缆上有多个信道</li>\n<li>HFC</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h5 id=\"3-光纤和光缆\"><a class=\"markdownIt-Anchor\" href=\"#3-光纤和光缆\">#</a> (3). 光纤和光缆</h5>\n<blockquote>\n<ul>\n<li>光脉冲，每个脉冲表示一个 bit，在玻璃纤维中传输</li>\n<li>告诉\n<ul>\n<li>点到点高速传输 (如 10Gps-100Gps 传输速率)</li>\n</ul>\n</li>\n<li>低误码率：再来个那个中继器之间可以有很长的距离；不受电磁噪声的干扰</li>\n<li>安全</li>\n</ul>\n</blockquote>\n<h5 id=\"4-无线链路\"><a class=\"markdownIt-Anchor\" href=\"#4-无线链路\">#</a> (4). 无线链路</h5>\n<blockquote>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220322144232075.png\" alt=\"image-20220322144232075\"></p>\n</blockquote>\n<h3 id=\"5-internet-和-isp\"><a class=\"markdownIt-Anchor\" href=\"#5-internet-和-isp\">#</a> 5. Internet 和 ISP</h3>\n<h4 id=\"1-互联网结构网络的网络\"><a class=\"markdownIt-Anchor\" href=\"#1-互联网结构网络的网络\">#</a> 1. 互联网结构：网络的网络</h4>\n<blockquote>\n<ul>\n<li>\n<p>端系统通过接入 ISP 连接到互联网</p>\n<ul>\n<li>住宅、公司和大学的 ISP</li>\n</ul>\n</li>\n<li>\n<p>接入的 ISP 必须时互联的</p>\n<ul>\n<li>因此任何 2 个端系统可相互发送分组到对方</li>\n</ul>\n</li>\n<li>\n<p>导致的 “网络的网络” 非常复杂</p>\n<ul>\n<li>发展和演化时通过经济的和国家的政策来驱动的</li>\n</ul>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327160944289.png\" alt=\"image-20220327160944289\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327161155632.png\" alt=\"image-20220327161155632\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327161409978.png\" alt=\"image-20220327161409978\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327161449434.png\" alt=\"image-20220327161449434\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327161518566.png\" alt=\"image-20220327161518566\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327161643734.png\" alt=\"image-20220327161643734\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"2-isp-之间的连接\"><a class=\"markdownIt-Anchor\" href=\"#2-isp-之间的连接\">#</a> 2. ISP 之间的连接</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220327161807562.png\" alt=\"image-20220327161807562\"></li>\n</ul>\n</blockquote>\n<h3 id=\"6分组延时-丢失和吞吐量\"><a class=\"markdownIt-Anchor\" href=\"#6分组延时-丢失和吞吐量\">#</a> 6. 分组延时、丢失和吞吐量</h3>\n<ul>\n<li>\n<p>分组丢失和延时如何发生</p>\n<blockquote>\n<p>在路由器缓冲区的分组队列：</p>\n<ul>\n<li>分组到达链路的速率超过了链路输出的能力</li>\n<li>分组等待排到队头、被传输</li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220327163006889.png\" alt=\"image-20220327163006889\"></li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"1-四种分组延时\"><a class=\"markdownIt-Anchor\" href=\"#1-四种分组延时\">#</a> 1. 四种分组延时</h4>\n<blockquote>\n<ol>\n<li>\n<p>节点处理延时</p>\n<ul>\n<li>检查 bit 级差错</li>\n<li>检查分组首部和决定将分组导向何处</li>\n</ul>\n</li>\n<li>\n<p>排队延时</p>\n<ul>\n<li>在输出链路上等待传输的时间</li>\n<li>依赖于路由器的拥塞程度</li>\n</ul>\n</li>\n<li>\n<p>传输延时</p>\n<ul>\n<li>R = 链路带宽 (bps)</li>\n<li>L = 分组长度 (bits)</li>\n<li>将分组发送到链路上的时间 =$$L/R$$</li>\n<li>存储转发延时</li>\n</ul>\n</li>\n<li>\n<p>传播延时</p>\n<ul>\n<li>d = 物理链路的长度</li>\n<li>s = 在媒体上的传播速度 (~$$2*10^8 m/s$$)</li>\n<li>传播延时 = d/s</li>\n</ul>\n</li>\n<li>\n<p><strong>节点延时</strong></p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327165000049.png\" alt=\"image-20220327165000049\"></p>\n</li>\n<li>\n<p>因素</p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220327165631946.png\" alt=\"image-20220327165631946\"></p>\n</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h4 id=\"2-吞吐量\"><a class=\"markdownIt-Anchor\" href=\"#2-吞吐量\">#</a> 2. 吞吐量</h4>\n<blockquote>\n<ul>\n<li>在源端和目标端之间传输的有效数据量的速率 (数据量 / 单位时间)\n<ul>\n<li>瞬间吞吐量：在一个时间点的速率</li>\n<li>平均吞吐量：在一个长时间内平均值</li>\n<li>瓶颈链路\n<ul>\n<li>端到端路径上。限制端到端吞吐的链路</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"7-协议层次和服务模型\"><a class=\"markdownIt-Anchor\" href=\"#7-协议层次和服务模型\">#</a> 7. 协议层次和服务模型</h3>\n<h4 id=\"1-服务和服务点\"><a class=\"markdownIt-Anchor\" href=\"#1-服务和服务点\">#</a> 1. 服务和服务点</h4>\n<blockquote>\n<ol>\n<li>服务 (Service)：低层实体向上层实体提供它们之间的通信的能力\n<ul>\n<li>服务用户 (service user)</li>\n<li>服务提供者 (service provider)</li>\n</ul>\n</li>\n<li>原语 (primitive)：上层使用下层服务的形式，高层使用低层提供的服务，以及低层向高层提供服务都是通过服务访问原语来进行交互的形式</li>\n<li>服务访问点 SAP (Service Access Point)：使用下层提供的服务通过层间的接口 — 地点：\n<ul>\n<li>例子：邮箱</li>\n<li>地址 (address)：下层的一个实体支撑着上层的多个实体，SAP 有标志不同上层实体的作用</li>\n<li>可以有不同的实现，队列</li>\n<li>例子：传输层的 SAP：端口 (port)</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h4 id=\"2-服务类型\"><a class=\"markdownIt-Anchor\" href=\"#2-服务类型\">#</a> 2. 服务类型</h4>\n<blockquote>\n<ol>\n<li>面向连接的服务\n<ul>\n<li>连接 (Connection)：两个通信实体为进行通信而建立的一种结合</li>\n<li>面向连接的服务通信的过程：建立连接、通信、拆除连接</li>\n<li>面向连接的例子：网路层的连接被称为虚电路</li>\n<li>适用范围：对于打数据块要传输，不适合小的零星报文</li>\n<li>特点：保护</li>\n<li>服务类型\n<ul>\n<li>可靠的信息流：传送页面 (可靠的获得，通过接收方的确认)</li>\n<li>可靠的字节流，远程登陆</li>\n<li>不可靠的连接，数字化声音</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>面向无连接的服务 (Connection Service)\n<ul>\n<li>无连接服务：两个对等层实体在通信前不需要建立一个连接，不可预留资源；不需要通信双方都是活跃：(例：寄信)</li>\n<li>特点：不可靠、可能重复、可能失序</li>\n<li>IP 分组，数据包</li>\n<li>适用范围：适合传输零星数据</li>\n<li>服务类型：\n<ul>\n<li>不可靠的数据报，电子方式的函件</li>\n<li>有确认的数据报、挂号信</li>\n<li>请求回答、信息查询</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h4 id=\"3-服务和协议\"><a class=\"markdownIt-Anchor\" href=\"#3-服务和协议\">#</a> 3. 服务和协议</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220327221853781.png\" alt=\"image-20220327221853781\"></li>\n<li>数据单元 (DU):<img data-src=\"http://lgqimg.changzer.cn/image-20220328203928045.png\" alt=\"image-20220328203928045\"></li>\n</ul>\n</blockquote>\n<h4 id=\"4分层对于复杂系统的好处\"><a class=\"markdownIt-Anchor\" href=\"#4分层对于复杂系统的好处\">#</a> 4. 分层对于复杂系统的好处</h4>\n<blockquote>\n<ul>\n<li>*<img data-src=\"http://lgqimg.changzer.cn/image-20220329104256528.png\" alt=\"image-20220329104256528\"></li>\n</ul>\n</blockquote>\n<h4 id=\"5-internet-协议栈\"><a class=\"markdownIt-Anchor\" href=\"#5-internet-协议栈\">#</a> 5. Internet 协议栈</h4>\n<blockquote>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220329104527799.png\" alt=\"image-20220329104527799\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220329110344965.png\" alt=\"image-20220329110344965\"></p>\n</blockquote>\n<h4 id=\"6-封装与解封装\"><a class=\"markdownIt-Anchor\" href=\"#6-封装与解封装\">#</a> 6. 封装与解封装</h4>\n<blockquote>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220329111022155.png\" alt=\"image-20220329111022155\"></p>\n</blockquote>\n<h4 id=\"7-各层次的数据单元\"><a class=\"markdownIt-Anchor\" href=\"#7-各层次的数据单元\">#</a> 7. 各层次的数据单元</h4>\n<ul>\n<li>应用层：报文 (Message)</li>\n<li>传输层：报文段 (Segment)：TCP 端、UDP 数据报</li>\n<li>网络层：分组 packet (无连接方式：数据报 datagram)</li>\n<li>数据链路层：帧 (frame)</li>\n<li>物理层：位 (bit)</li>\n</ul>\n",
            "tags": [
                "计算机网络"
            ]
        },
        {
            "id": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "url": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "title": "《计算机网络：自定向下》第三章：传输层",
            "date_published": "2022-10-03T10:32:49.649Z",
            "content_html": "<h1 id=\"第三章传输层\"><a class=\"markdownIt-Anchor\" href=\"#第三章传输层\">#</a> 第三章：传输层</h1>\n<h3 id=\"1-概述和传输层服务\"><a class=\"markdownIt-Anchor\" href=\"#1-概述和传输层服务\">#</a> 1. 概述和传输层服务</h3>\n<h4 id=\"1-传输协议和服务\"><a class=\"markdownIt-Anchor\" href=\"#1-传输协议和服务\">#</a> (1). 传输协议和服务</h4>\n<blockquote>\n<ul>\n<li>为运行在不同和主机上的应用进程提供逻辑通信</li>\n<li>传输协议运行在端系统\n<ul>\n<li>发送方：将应用层的报文分成报文段，然后传递给网络层</li>\n<li>接收方：将报文段重组成报文，然后传递给应用层</li>\n</ul>\n</li>\n<li>有多个传输层协议可供应用选择\n<ul>\n<li>Internet：TCP 和 UDP</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"2-传输层-vs-网络层\"><a class=\"markdownIt-Anchor\" href=\"#2-传输层-vs-网络层\">#</a> (2). 传输层 VS 网络层</h4>\n<blockquote>\n<ul>\n<li>网络层服务：主机之间的逻辑通信</li>\n<li>传输层服务：进程之间的逻辑通信\n<ul>\n<li>依赖于网络层的服务\n<ul>\n<li>延时、带宽</li>\n</ul>\n</li>\n<li>并对网络层的服务进行增强\n<ul>\n<li>数据丢失、顺序混乱、加密</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220418221316700.png\" alt=\"image-20220418221316700\"></li>\n</ul>\n</blockquote>\n<h4 id=\"3-internet-传输协议\"><a class=\"markdownIt-Anchor\" href=\"#3-internet-传输协议\">#</a> (3). Internet 传输协议</h4>\n<blockquote>\n<ul>\n<li>\n<p>可靠的、保序的传输：TCP</p>\n<ul>\n<li>多路复用、解复用</li>\n<li>拥塞控制</li>\n<li>流量控制</li>\n<li>建立连接</li>\n</ul>\n</li>\n<li>\n<p>不可靠、不保序的传输：UDP</p>\n<ul>\n<li>\n<p>多路复用、解复用</p>\n</li>\n<li>\n<p>没有为尽力而为的 IP 服务添加更多的其他额外服务</p>\n</li>\n</ul>\n</li>\n<li>\n<p>都不提供的服务：</p>\n<ul>\n<li>延时保证</li>\n<li>带宽保证</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"2-多路复用解复用\"><a class=\"markdownIt-Anchor\" href=\"#2-多路复用解复用\">#</a> 2. 多路复用 / 解复用</h3>\n<blockquote>\n<ul>\n<li>\n<p>在发送方主机多路复用</p>\n<blockquote>\n<p>从多个套接字接收来自多个进程的报文，根据套接字对应的 IP 地址和端口号等信息对报文段用头部加以封装 (该头部信息用于以后的解复用)</p>\n</blockquote>\n</li>\n<li>\n<p>在接收方主机解复用</p>\n<blockquote>\n<p>根据报文段的头部信息中的 IP 地址和端口号将收到的报文段发给正确的套接字 (和对应的应用进程)</p>\n</blockquote>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419141823311.png\" alt=\"image-20220419141823311\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"3-无连接传输-udp\"><a class=\"markdownIt-Anchor\" href=\"#3-无连接传输-udp\">#</a> 3. 无连接传输 UDP</h3>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419143001305.png\" alt=\"image-20220419143001305\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419143333624.png\" alt=\"image-20220419143333624\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419143847516.png\" alt=\"image-20220419143847516\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419144458370.png\" alt=\"image-20220419144458370\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"4-可靠数据传输rdt的原理\"><a class=\"markdownIt-Anchor\" href=\"#4-可靠数据传输rdt的原理\">#</a> 4. 可靠数据传输 (RDT) 的原理</h3>\n<h4 id=\"1问题描述\"><a class=\"markdownIt-Anchor\" href=\"#1问题描述\">#</a> (1) 问题描述</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220419145440402.png\" alt=\"image-20220419145440402\"></li>\n</ul>\n</blockquote>\n<h4 id=\"2rdt\"><a class=\"markdownIt-Anchor\" href=\"#2rdt\">#</a> (2)RDT</h4>\n<blockquote>\n<ul>\n<li>\n<p>RDT 1.0** &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220419145959385.png\" alt=\"image-20220419145959385\"></p>\n</li>\n<li>\n<p><strong>RDT 2.0</strong> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220419150123327.png\" alt=\"image-20220419150123327\"></p>\n</li>\n<li>\n<p><strong>RDT 2.1</strong> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220419200802380.png\" alt=\"image-20220419200802380\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419201147064.png\" alt=\"image-20220419201147064\"></p>\n</li>\n<li>\n<p><strong>RDT 2.2</strong> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220419201737116.png\" alt=\"image-20220419201737116\"></p>\n</li>\n<li>\n<p><strong>RDT 3.0</strong> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220419203025590.png\" alt=\"image-20220419203025590\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419204200758.png\" alt=\"image-20220419204200758\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"3-流水协议\"><a class=\"markdownIt-Anchor\" href=\"#3-流水协议\">#</a> (3). 流水协议</h4>\n<blockquote>\n<ul>\n<li>\n<p>流水线协议<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220419205119533.png\" alt=\"image-20220419205119533\"></p>\n</li>\n<li>\n<p>滑动窗口协议<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220419205349368.png\" alt=\"image-20220419205349368\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419210028291.png\" alt=\"image-20220419210028291\"></p>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220419210126707.png\" alt=\"image-20220419210126707\"></li>\n</ul>\n</li>\n</ul>\n<p>​ <img data-src=\"http://lgqimg.changzer.cn/image-20220419210300325.png\" alt=\"image-20220419210300325\"></p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419210609748.png\" alt=\"image-20220419210609748\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419211136539.png\" alt=\"image-20220419211136539\"></p>\n</li>\n<li>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220419211729788.png\" alt=\"image-20220419211729788\"></li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419212606597.png\" alt=\"image-20220419212606597\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419212646137.png\" alt=\"image-20220419212646137\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419212806202.png\" alt=\"image-20220419212806202\"></p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419213042447.png\" alt=\"image-20220419213042447\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419213559365.png\" alt=\"image-20220419213559365\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419213920016.png\" alt=\"image-20220419213920016\"></p>\n</li>\n<li></li>\n</ul>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220419214050639.png\" alt=\"image-20220419214050639\"></p>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220419214152849.png\" alt=\"image-20220419214152849\"></li>\n</ul>\n</blockquote>\n<h3 id=\"5-面向连接的传输tcp\"><a class=\"markdownIt-Anchor\" href=\"#5-面向连接的传输tcp\">#</a> 5、面向连接的传输：TCP</h3>\n<h4 id=\"1-tcp-概述\"><a class=\"markdownIt-Anchor\" href=\"#1-tcp-概述\">#</a> (1). TCP 概述</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220423155619410.png\" alt=\"image-20220423155619410\"></li>\n</ul>\n</blockquote>\n<h4 id=\"2-tcp-报文结构\"><a class=\"markdownIt-Anchor\" href=\"#2-tcp-报文结构\">#</a> (2). TCP 报文结构</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220423155829103.png\" alt=\"image-20220423155829103\">\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220423161536259.png\" alt=\"image-20220423161536259\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"3-往返时间的估计与超时\"><a class=\"markdownIt-Anchor\" href=\"#3-往返时间的估计与超时\">#</a> (3). 往返时间的估计与超时</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423162303614.png\" alt=\"image-20220423162303614\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423162953639.png\" alt=\"image-20220423162953639\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423163025528.png\" alt=\"image-20220423163025528\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"4-可靠数据传输\"><a class=\"markdownIt-Anchor\" href=\"#4-可靠数据传输\">#</a> (4). 可靠数据传输</h4>\n<blockquote>\n<ul>\n<li>\n<p>TCP 在 IP 不可靠传输服务的基础上建立了 rdt</p>\n<ul>\n<li>管道化的报文段\n<ul>\n<li>GBN or SR</li>\n</ul>\n</li>\n<li>累积确认 (像 GBN)</li>\n<li>单个冲传定时器</li>\n<li>是否可以接收乱序的，没有规范</li>\n</ul>\n</li>\n<li>\n<p>通过以下时间出发重传</p>\n<ul>\n<li>超时 (只重发那个最早的未确认段：SR)</li>\n<li>重复的确认\n<ul>\n<li>例子：收到了 ACK50，之后又收到 3 个 ACK50</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>首先考虑简化的 TCP 发送方：</p>\n<ul>\n<li>忽略重复的确认</li>\n<li>忽略流量控制和拥塞控制</li>\n</ul>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423164848094.png\" alt=\"image-20220423164848094\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423165414206.png\" alt=\"image-20220423165414206\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220423165709674.png\" alt=\"image-20220423165709674\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"5-流量控制\"><a class=\"markdownIt-Anchor\" href=\"#5-流量控制\">#</a> (5). 流量控制</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220426135711627.png\" alt=\"image-20220426135711627\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220426135903078.png\" alt=\"image-20220426135903078\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"6-连接管理\"><a class=\"markdownIt-Anchor\" href=\"#6-连接管理\">#</a> (6). 连接管理</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220426140218407.png\" alt=\"image-20220426140218407\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220426142126406.png\" alt=\"image-20220426142126406\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"6-拥塞控制原理\"><a class=\"markdownIt-Anchor\" href=\"#6-拥塞控制原理\">#</a> 6、拥塞控制原理</h3>\n<blockquote>\n<ul>\n<li>\n<p>拥塞：</p>\n<ul>\n<li>非正常的定义：“太多的数据需要网络传输，超过了网络的处理能力”</li>\n<li>与流量控制表现不同</li>\n<li>拥塞的表现：\n<ul>\n<li>分组丢失 (路由器缓冲区溢出)</li>\n<li>分组经历比较长的延迟 (在路由器的队列中排队)</li>\n</ul>\n</li>\n<li>网络中前 10 位的问题！</li>\n</ul>\n</li>\n<li>\n<p>原因：</p>\n<ul>\n<li>\n<p>代价：1. 延迟大 2. 需要更大的输出速率 3. 在拥塞时，会重传许多不必要的分组，加速拥塞 4. 在拥塞时，有些分组上游的传输能力被浪费掉，无法进行传输</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429135752212.png\" alt=\"image-20220429135752212\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429135827382.png\" alt=\"image-20220429135827382\"></p>\n</li>\n<li>\n<p>死锁<img data-src=\"http://lgqimg.changzer.cn/image-20220429140524096.png\" alt=\"image-20220429140524096\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p>拥塞控制方法</p>\n<ol>\n<li>端到端拥塞控制\n<ul>\n<li>没有来自网络的显示反馈<br>\n端系统根据延迟和丢失事件推断是否拥有拥塞</li>\n<li>TCP 采用的方法</li>\n</ul>\n</li>\n<li>网络辅助的拥塞控制\n<ul>\n<li>路由器提供给端系统以反馈信息\n<ul>\n<li>单个 bit 置位，显示有拥塞 (SNA,DECbit,TCP/IP ECN,ATM)</li>\n<li>显式提供发送端可以采用的速率</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p>案例：</p>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220429142719285.png\" alt=\"image-20220429142719285\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"7-tcp-拥塞\"><a class=\"markdownIt-Anchor\" href=\"#7-tcp-拥塞\">#</a> 7、TCP 拥塞</h3>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429151155134.png\" alt=\"image-20220429151155134\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429153002979.png\" alt=\"image-20220429153002979\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429153216660.png\" alt=\"image-20220429153216660\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429153325916.png\" alt=\"image-20220429153325916\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429153512487.png\" alt=\"image-20220429153512487\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429153530821.png\" alt=\"image-20220429153530821\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429154210009.png\" alt=\"image-20220429154210009\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429154259596.png\" alt=\"image-20220429154259596\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429154435255.png\" alt=\"image-20220429154435255\"></p>\n</li>\n<li>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429154752232.png\" alt=\"image-20220429154752232\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220429154816391.png\" alt=\"image-20220429154816391\"></p>\n<p><img data-src=\"C:%5CUsers%5C24191%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220429155146589.png\" alt=\"image-20220429155146589\"></p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n",
            "tags": [
                "计算机网络"
            ]
        },
        {
            "id": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82/",
            "url": "https://maplelearc.github.io/2022/10/03/NetWork/%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82/",
            "title": "《计算机网络：自定向下》第二章：应用层",
            "date_published": "2022-10-03T10:32:49.569Z",
            "content_html": "<h1 id=\"二-第二章应用层\"><a class=\"markdownIt-Anchor\" href=\"#二-第二章应用层\">#</a> 二。第二章：应用层</h1>\n<h3 id=\"1-应用层原理\"><a class=\"markdownIt-Anchor\" href=\"#1-应用层原理\">#</a> 1. 应用层原理</h3>\n<h4 id=\"1创建一个新的网络应用\"><a class=\"markdownIt-Anchor\" href=\"#1创建一个新的网络应用\">#</a> (1). 创建一个新的网络应用</h4>\n<blockquote>\n<ul>\n<li>编程：\n<ul>\n<li>在不同的端系统上运行</li>\n<li>通过网络基础设施提供的服务应用进程彼此通信</li>\n<li>如 Web：\n<ul>\n<li>Web 服务器软件与浏览器软件通信</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>网络核心中没有应用层软件\n<ul>\n<li>网络核心中没有应用层功能</li>\n<li>网络核心只有再端系统上存在，快速网络应用开发和部署</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"2-网络应用的体系加购\"><a class=\"markdownIt-Anchor\" href=\"#2-网络应用的体系加购\">#</a> (2). 网络应用的体系加购</h4>\n<blockquote>\n<ul>\n<li>客户 — 服务器模式 (C/S：client/server)\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220329144808351.png\" alt=\"image-20220329144808351\"></li>\n</ul>\n</li>\n<li>对等模式 (P2P：Peer to Peer)\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220329145612589.png\" alt=\"image-20220329145612589\"></li>\n</ul>\n</li>\n<li>混合体：客户 — 服务器和对等体系结构\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220329145627990.png\" alt=\"image-20220329145627990\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"3进程通信\"><a class=\"markdownIt-Anchor\" href=\"#3进程通信\">#</a> (3). 进程通信</h4>\n<blockquote>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220329151200910.png\" alt=\"image-20220329151200910\"></p>\n</blockquote>\n<h4 id=\"4分布式进程需要解决的问题\"><a class=\"markdownIt-Anchor\" href=\"#4分布式进程需要解决的问题\">#</a> (4). 分布式进程需要解决的问题</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220329152821549.png\" alt=\"image-20220329152821549\"></p>\n</li>\n<li>\n<p>标识进程，需要定义两种信息：</p>\n<ol>\n<li>主机的地址\n<ul>\n<li>主机由其 IP 地址标识</li>\n</ul>\n</li>\n<li>再目的主机中指定接收进程的标识符\n<ul>\n<li>用目的端口号来进行标识，特定的服务端拥有特定的端口号</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330155321152.png\" alt=\"image-20220330155321152\"></p>\n</li>\n<li>\n<p>TCP 之上的套接字 (socket)<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220330161252934.png\" alt=\"image-20220330161252934\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330162301890.png\" alt=\"image-20220330162301890\"></p>\n</li>\n<li>\n<p>UDP 之上的套接字 (socket)</p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330162620053.png\" alt=\"image-20220330162620053\"></p>\n</li>\n<li>\n<p>套接字<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220330163759101.png\" alt=\"image-20220330163759101\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330164041356.png\" alt=\"image-20220330164041356\"></p>\n</li>\n<li>\n<p>应用层协议<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220330164225194.png\" alt=\"image-20220330164225194\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330164638424.png\" alt=\"image-20220330164638424\"></p>\n</li>\n<li>\n<p>Internet 传输层提供的服务</p>\n<ul>\n<li>TCP 服务\n<ul>\n<li>可靠的传输服务</li>\n<li>流量控制：发送方不会淹没接收方</li>\n<li>拥塞控制：当网络出现用塞时，能抑制发送方</li>\n<li>不能提供的服务：时间保证、最小吞吐保证和安全</li>\n<li>面向连接：要求再客户端进程和服务器进程之间建立连接</li>\n</ul>\n</li>\n<li>UDP 服务\n<ul>\n<li>不可靠数据传输</li>\n<li>不能提供的服务：可靠、流量控制、拥塞控制、时间、带宽保证、建立连接</li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220330165720561.png\" alt=\"image-20220330165720561\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330170336021.png\" alt=\"image-20220330170336021\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"2-web-and-http\"><a class=\"markdownIt-Anchor\" href=\"#2-web-and-http\">#</a> 2. Web and HTTP</h3>\n<h4 id=\"1-术语\"><a class=\"markdownIt-Anchor\" href=\"#1-术语\">#</a> (1). 术语</h4>\n<blockquote>\n<ul>\n<li>Web 页：由一些对象组成</li>\n<li>对象可以是 HTM 文件，JPEG 图像、Java 小程序、声音剪辑文件等</li>\n<li>Web 也含有一个基本的 HTML 文件，该基本文件、又包含若干对象的引用 (链接)</li>\n<li>通过 URL 对每个对象进行引用\n<ul>\n<li>访问协议，用户名，口令字，端口等</li>\n</ul>\n</li>\n<li>URL 格式：\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220330214913519.png\" alt=\"image-20220330214913519\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"2-http-概况\"><a class=\"markdownIt-Anchor\" href=\"#2-http-概况\">#</a> (2). HTTP 概况</h4>\n<blockquote>\n<ul>\n<li>\n<p>HTTP：超文本传输协议</p>\n</li>\n<li>\n<p>Web 的应用层协议</p>\n</li>\n<li>\n<p>客户 / 服务器模式</p>\n<ul>\n<li>客户：请求、接收和显示 Web 对象的浏览器</li>\n<li>服务器：对请求进行响应，发送对象的 Web 服务器</li>\n</ul>\n</li>\n<li>\n<p>HTTP 1.0：RFC 1945</p>\n</li>\n<li>\n<p>HTTP 1.1：RFC 2068</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330220029553.png\" alt=\"image-20220330220029553\"></p>\n</li>\n<li>\n<p>HTTP 使用在 TCP 上</p>\n</li>\n</ul>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330220339190.png\" alt=\"image-20220330220339190\"></p>\n</blockquote>\n<h4 id=\"3-http-链接\"><a class=\"markdownIt-Anchor\" href=\"#3-http-链接\">#</a> (3). HTTP 链接</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220330220924628.png\" alt=\"image-20220330220924628\"></p>\n</li>\n<li>\n<p>响应时间模型<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220407193744947.png\" alt=\"image-20220407193744947\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407194224093.png\" alt=\"image-20220407194224093\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"4http-报文格式\"><a class=\"markdownIt-Anchor\" href=\"#4http-报文格式\">#</a> (4).HTTP 报文格式</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407194357632.png\" alt=\"image-20220407194357632\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407194652014.png\" alt=\"image-20220407194652014\"></p>\n</li>\n<li>\n<p>提交表单输入</p>\n<ol>\n<li>\n<p>POST 方式：</p>\n<ul>\n<li>网页通常包括表单输入</li>\n<li>包含实体主体 (entity body) 中的输入被提交到服务器</li>\n</ul>\n</li>\n<li>\n<p>URL 方式：</p>\n<ul>\n<li>方法：GET・</li>\n<li>输入通过请求行的 URL 字段上载</li>\n</ul>\n</li>\n<li>\n<p>方法类型：</p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407195838765.png\" alt=\"image-20220407195838765\"></p>\n</li>\n</ol>\n</li>\n<li>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220407200305547.png\" alt=\"image-20220407200305547\"><br>\nTCP 无边界，需要进程自己去区分前部 message 和后部 message。</li>\n<li>HTTP 响应状态码：<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220407201555007.png\" alt=\"image-20220407201555007\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"5-用户服务器状态cookies\"><a class=\"markdownIt-Anchor\" href=\"#5-用户服务器状态cookies\">#</a> (5). 用户 — 服务器状态：Cookies</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407215325951.png\" alt=\"image-20220407215325951\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220407215851561.png\" alt=\"image-20220407215851561\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"6web-缓存代理服务器\"><a class=\"markdownIt-Anchor\" href=\"#6web-缓存代理服务器\">#</a> (6).Web 缓存 (代理服务器)</h4>\n<blockquote>\n<ul>\n<li>\n<ul>\n<li>目标：不访问原时服务器，就满足客户的请求</li>\n<li>用户设置浏览器：通过缓存访问 Web</li>\n<li>浏览器将所有的 HTTP 请求发给缓存\n<ul>\n<li>在缓存中的对象：缓存直接返回对象</li>\n<li>如对象不在缓存，缓存请求原始服务器，然后再将对象返回给客户端</li>\n</ul>\n</li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220407221951845.png\" alt=\"image-20220407221951845\"></li>\n</ul>\n</li>\n<li>\n<ul>\n<li>缓存既是客户端又是服务端</li>\n<li>通常缓存是由 ISP 安装 (大学、公司、居民区 ISP)</li>\n<li>Web 缓存的好处：\n<ul>\n<li>降低客户端请求响应时间</li>\n<li>可以大大减少一个机构内部网络与 Internet 接入链路上的流量</li>\n<li>互联网大量采用缓存：额可以使较弱的 ICP 也能够有效提供内容</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>非 Web 缓存：<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220409114955328.png\" alt=\"image-20220409114955328\"></li>\n<li>Web 缓存：<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220409120235938.png\" alt=\"image-20220409120235938\"></li>\n</ul>\n</blockquote>\n<h4 id=\"7-条件-get-方法\"><a class=\"markdownIt-Anchor\" href=\"#7-条件-get-方法\">#</a> (7). 条件 GET 方法</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220409120801163.png\" alt=\"image-20220409120801163\"></li>\n</ul>\n</blockquote>\n<h3 id=\"3-ftp文件传输协议\"><a class=\"markdownIt-Anchor\" href=\"#3-ftp文件传输协议\">#</a> 3. FTP：文件传输协议</h3>\n<blockquote>\n<ul>\n<li>\n<p>向远程主机上传输文件或从远程主机接收文件</p>\n</li>\n<li>\n<p>客户 / 服务器模式</p>\n<ul>\n<li>客户端：发起传输的一方</li>\n<li>服务器：远程主机</li>\n</ul>\n</li>\n<li>\n<p>ftp：RFC 959</p>\n</li>\n<li>\n<p>ftp 服务器：端口号为 21</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220409172523400.png\" alt=\"image-20220409172523400\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220409172853927.png\" alt=\"image-20220409172853927\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220409173600878.png\" alt=\"image-20220409173600878\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"4-email\"><a class=\"markdownIt-Anchor\" href=\"#4-email\">#</a> 4. Email</h3>\n<blockquote>\n<ol>\n<li>\n<p>3 个主要组成部分：</p>\n<ul>\n<li>\n<p>用户代理</p>\n<ul>\n<li>又名 “邮件阅读器”</li>\n<li>撰写、编辑和阅读邮件</li>\n<li>如 outlook、Foxmail</li>\n<li>输出和输入邮件保存在服务器上</li>\n</ul>\n</li>\n<li>\n<p>邮件服务器</p>\n<ul>\n<li>邮箱中管理和维护发送给用户的邮件</li>\n<li>输出报文队列保持待发送邮件报文</li>\n<li>邮件服务器之间的 SMTP 协议：发送 email 报文\n<ul>\n<li>客户：发送方邮件服务器</li>\n<li>服务器：接收端邮件服务器</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>简单邮件传输协议：SMTP</p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410143108077.png\" alt=\"image-20220410143108077\"></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5C24191%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220410143758639.png\" alt=\"image-20220410143758639\"></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410133046345.png\" alt=\"image-20220410133046345\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410145028517.png\" alt=\"image-20220410145028517\"></p>\n</li>\n<li>\n<p>POP3 协议<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410144433916.png\" alt=\"image-20220410144433916\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410144621340.png\" alt=\"image-20220410144621340\"></p>\n</li>\n</ol>\n</blockquote>\n<h3 id=\"5-dns\"><a class=\"markdownIt-Anchor\" href=\"#5-dns\">#</a> 5. DNS</h3>\n<h4 id=\"1-dns-必要性\"><a class=\"markdownIt-Anchor\" href=\"#1-dns-必要性\">#</a> (1). DNS 必要性</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220410150903728.png\" alt=\"image-20220410150903728\"></li>\n<li>DNS 完成域名到 IP 地址的转化</li>\n</ul>\n</blockquote>\n<h4 id=\"2-dns-总体思路和目标\"><a class=\"markdownIt-Anchor\" href=\"#2-dns-总体思路和目标\">#</a> (2). DNS 总体思路和目标</h4>\n<blockquote>\n<ol>\n<li>DNS 的主要思路\n<ul>\n<li>分层的、基于域的命名方式，用于解决设备命名问题</li>\n<li>若干分布式的数据库存储域名和相应 IP 地址，完成名字到 IP 地址的方式，解决域名到 IP 地址的问题</li>\n<li>运行在 UDP 之上端口号为 53 的应用服务，DNS 的实现具有事务性特点，需要即时转换</li>\n<li>核心的 Internet 功能，但以应用层协议实现，在网络边缘实现\n<ul>\n<li>网路边缘处理复杂性</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>DNS 主要目的\n<ul>\n<li>实现主机名 - IP 地址的转换 (name/IP translate)</li>\n<li>其他目的\n<ul>\n<li>主机别名到规范名字的转化：Host aliasing</li>\n<li>邮件服务器别名到邮件服务器的正规名字的转换：Mail server aliasing</li>\n<li>负载均衡：Load Distribution</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h4 id=\"3-dns-域名结构\"><a class=\"markdownIt-Anchor\" href=\"#3-dns-域名结构\">#</a> (3). DNS 域名结构</h4>\n<blockquote>\n<ul>\n<li>一个层面命名设备会有很多重名</li>\n<li>DNS 采用层次树状结构的命名方法，以倒着的树来命名</li>\n<li>Internet 跟被划分为几百个顶级域 (top lever domains)\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220410155911558.png\" alt=\"image-20220410155911558\"></li>\n</ul>\n</li>\n<li>每个 (子) 域下面课可划分为若干个子域 (subdomains)</li>\n<li>树叶是主机</li>\n<li>全球共有 13 个根名字服务器</li>\n</ul>\n</blockquote>\n<h4 id=\"4-dns-的名字空间\"><a class=\"markdownIt-Anchor\" href=\"#4-dns-的名字空间\">#</a> (4). DNS 的名字空间</h4>\n<blockquote>\n<ul>\n<li>域名\n<ul>\n<li>从本域网上，直到树根</li>\n<li>中间使用 “.” 间隔不同的级别</li>\n<li>例如：<span class=\"exturl\" data-url=\"aHR0cDovL3VzdGMuZWR1LmNu\">ustc.edu.cn</span> <span class=\"exturl\" data-url=\"aHR0cDovL2F1dG8udXN0cy5lZHUuY24=\">auto.usts.edu.cn</span></li>\n<li>域的域名：可以用于表示一个域</li>\n<li>主机的域名：一个域上的一个主机</li>\n</ul>\n</li>\n<li>域名的管理\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220410161313729.png\" alt=\"image-20220410161313729\"></li>\n</ul>\n</li>\n<li>域与物理网络无关\n<ul>\n<li>域遵从组织界限，而不是物理网络\n<ul>\n<li>一个域的主机可以不在一个网络上</li>\n<li>一个网络的主机可以不在一个域</li>\n</ul>\n</li>\n<li>域的划分是逻辑的，而不是物理的</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"5-域名-ip-地址转化\"><a class=\"markdownIt-Anchor\" href=\"#5-域名-ip-地址转化\">#</a> (5). 域名 - IP 地址转化</h4>\n<blockquote>\n<ul>\n<li>\n<p>一个名字服务器的问题</p>\n<ul>\n<li>可靠性问题：单点故障</li>\n<li>扩展性问题：通信容量</li>\n<li>维护问题：远距离的集中式数据库</li>\n</ul>\n</li>\n<li>\n<p>区域</p>\n<ul>\n<li>区域的划分有区域管理者自己决定</li>\n<li>将 DNS 名字空间划分为互不相交的区域，每个区域都是树的一部分</li>\n<li>名字服务器：\n<ul>\n<li>每个区域都有一个名字服务器；维护着它所管辖区域的权威信息</li>\n<li>名字服务器允许被放置在区域之外，以保障可靠性</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>权威 DNS 服务器：组织机构的 DNS 服务器，提供组织机构服务器 (如 Web 和 mail) 可访问的主机和 IP 之间的映射。组织机构可以选择实现自己维护或某个服务提供商来维护。</p>\n</li>\n<li>\n<p>顶级域 (TLD) 服务器：<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410211022227.png\" alt=\"image-20220410211022227\"></p>\n</li>\n<li>\n<p>区域名字服务器维护资源记录<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410211152953.png\" alt=\"image-20220410211152953\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410211757078.png\" alt=\"image-20220410211757078\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"6-dns-的大致工作过程\"><a class=\"markdownIt-Anchor\" href=\"#6-dns-的大致工作过程\">#</a> (6). DNS 的大致工作过程</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410215330879.png\" alt=\"image-20220410215330879\"></p>\n</li>\n<li>\n<p>本地名字服务器 (Local Name Server)<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410215735041.png\" alt=\"image-20220410215735041\"></p>\n</li>\n<li>\n<p>名字服务器</p>\n<ul>\n<li>\n<p>当本地名字服务器拥有本地缓存时，直接返回</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410215820227.png\" alt=\"image-20220410215820227\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p>递归查询</p>\n<ul>\n<li>当本地服务器没有缓存，不能解析时，会顺着上一层次的服务器进行查询，</li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220410220447168.png\" alt=\"image-20220410220447168\"></li>\n</ul>\n</li>\n<li>\n<p>迭代查询</p>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220410220546365.png\" alt=\"image-20220410220546365\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"7-dns-协议-报文\"><a class=\"markdownIt-Anchor\" href=\"#7-dns-协议-报文\">#</a> (7). DNS 协议、报文</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410220829143.png\" alt=\"image-20220410220829143\"></p>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220410221015919.png\" alt=\"image-20220410221015919\"></p>\n</li>\n<li>\n<p>提高性能<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410221105628.png\" alt=\"image-20220410221105628\"></p>\n</li>\n<li>\n<p>维护问题：新增一个域<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410221135331.png\" alt=\"image-20220410221135331\"></p>\n</li>\n<li>\n<p>攻击 DNS<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220410221318811.png\" alt=\"image-20220410221318811\"></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"6-p2p-应用\"><a class=\"markdownIt-Anchor\" href=\"#6-p2p-应用\">#</a> 6. P2P 应用</h3>\n<h4 id=\"1-纯-p2p-架构\"><a class=\"markdownIt-Anchor\" href=\"#1-纯-p2p-架构\">#</a> (1). 纯 P2P 架构</h4>\n<blockquote>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412103342009.png\" alt=\"image-20220412103342009\"></p>\n</blockquote>\n<h4 id=\"2文件分发时间\"><a class=\"markdownIt-Anchor\" href=\"#2文件分发时间\">#</a> (2). 文件分发时间</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412103756158.png\" alt=\"image-20220412103756158\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412104136824.png\" alt=\"image-20220412104136824\"></p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"3p2p-文件分发\"><a class=\"markdownIt-Anchor\" href=\"#3p2p-文件分发\">#</a> (3).P2P 文件分发</h4>\n<blockquote>\n<ul>\n<li>\n<p>结构化 (DHT) 和非结构化 P2P</p>\n<ul>\n<li>\n<p>覆盖网络：Peer 节点之间有逻辑撒上的网络连接，有数据上的交流，有 “边”，有邻居的关系</p>\n</li>\n<li>\n<p>结构化：Peer 节点构成的的覆盖网络是有序的，像树，环类似的有序结构</p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412132002881.png\" alt=\"image-20220412132002881\"></p>\n</li>\n<li>\n<p>每一份资源都由一组关键字进行标识。系统对其中的每一个关键字进行 Hash，根据 Hash 的结果决定此关键字对应的那条信息（即资源索引中的一项）由哪个用户负责储存。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>非结构化：Peer 节点构成的的覆盖网络是无序的</p>\n<ul>\n<li>\n<p>集中化目录</p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412110606345.png\" alt=\"image-20220412110606345\"></p>\n<ul>\n<li>\n<p>问题：</p>\n<ul>\n<li>单点故障</li>\n<li>性能瓶颈</li>\n<li>侵犯版权</li>\n</ul>\n</li>\n<li>\n<p>完全分布式</p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412110942921.png\" alt=\"image-20220412110942921\"></p>\n<ul>\n<li>Gnutella：\n<ul>\n<li>在已有的 TCP 连接上发送查询报文</li>\n<li>对等方转发查询报文</li>\n<li>以反方向返回查询命中报文</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>混合体</p>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412111705950.png\" alt=\"image-20220412111705950\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412111754652.png\" alt=\"image-20220412111754652\"></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>BitTorrent：(非结构化代表)</p>\n<ul>\n<li>\n<p>文件被分为一个个块 256KB，再使用另一张由每个 1bit 组成的 map 来表示是否拥有文件块。一个 bit 中 1 表示拥有，0 表示没有</p>\n</li>\n<li>\n<p>网络中的这些 peer 发送接收文件块，相互服务</p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412105030898.png\" alt=\"image-20220412105030898\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412125219735.png\" alt=\"image-20220412125219735\"></p>\n</li>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220412130809889.png\" alt=\"image-20220412130809889\"></p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"4-cdn\"><a class=\"markdownIt-Anchor\" href=\"#4-cdn\">#</a> (4). CDN</h4>\n<blockquote>\n<ul>\n<li>\n<p><img data-src=\"http://lgqimg.changzer.cn/image-20220414210941322.png\" alt=\"image-20220414210941322\"></p>\n</li>\n<li>\n<p>流化服务</p>\n<ul>\n<li>将视频为许多的流组成，在看视频时，一边播放视频一边加载后面的内容，而不是将整个视频先下载，再观看。这样大大减少了用户的等待时间</li>\n<li>DASH<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220414211902293.png\" alt=\"image-20220414211902293\"> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220414212610023.png\" alt=\"image-20220414212610023\"></li>\n</ul>\n</li>\n<li>\n<p>CND (内容分发网)</p>\n<ul>\n<li>\n<p>CDN 原理</p>\n<p><img data-src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b980c458efa74acdbb98948a84d29f51~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp\" alt=\"img\"></p>\n<p>上图假设一个内容提供商 NetCinema 雇佣了第三方内容提供商 KingCDN 来分发视频，在 NetCinema 的 Web 网页上，它的每个视频都被指派了一个 URL，如<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnZpZGVvLm5ldGNpbmVtYS5jb20lMkYyMzQyNTIzNQ==\"> video.netcinema.com/23425235</span> ，接下来将会发生图中的 6 个步骤：</p>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3huLS13d3ctNHg1ZjM5NGZvNTRhbzVvLk5ldENpbmVtYS5jb20=\">用户访问 www.NetCinema.com</span> , 并返回<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnZpZGVvLm5ldGNpbmVtYS5jb20lMkYyMzQyNTIzNQ==\"> video.netcinema.com/23425235</span> ；</li>\n<li>用户点击<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnZpZGVvLm5ldGNpbmVtYS5jb20lMkYyMzQyNTIzNQ==\"> video.netcinema.com/23425235</span> 时，该用户的主机发送了一个对于 <span class=\"exturl\" data-url=\"aHR0cDovL3ZpZGVvLm5ldGNpbmVtYS5jb20=\">video.netcinema.com</span> 的 DNS 请求</li>\n<li>用户的本地 DNS 服务器（LDNS）将该 DNS 请求中继到一个用户 NetCinema 的权限 DNS 服务器，该服务器看到是 video，就将 DNS 请求移交给 KingCDN，NetCinema 权威 DNS 服务器不返回 IP 地址，而是返回一个 KingCDN 域的主机名，如 <span class=\"exturl\" data-url=\"aHR0cDovLzEyMy5raW5nY2RuLmNvbQ==\">123.kingcdn.com</span></li>\n<li>当 LDNS 拿到 <span class=\"exturl\" data-url=\"aHR0cDovLzEyMy5raW5nY2RuLmNvbQ==\">123.kingcdn.com</span> 时，就去请求 KingCDN 权威 DNS 服务器，KingCDN 权威 DNS 服务器这时返回的才是 KindCDN 服务器的 IP 地址</li>\n<li>LDNS 把 KindCDN 服务器的 IP 地址返回给用户</li>\n<li>用户拿到 KindCDN 服务器的 IP 地址后，就发起连接请求，并获取资源</li>\n</ol>\n</li>\n<li>\n<p>集群选择策略</p>\n<ul>\n<li>任何 CDN 的部署，其集群选择策略很重要，因为关乎到用户体验和网络性能，用户选择太远的集群，就会造成网络损耗，所以集群选择策略有两种：\n<ul>\n<li>基于地理位置最为临近的。这种可以根据用户 IP 作出选择，比如基于商用地理位置数据库可以查询到用户的地理位置</li>\n<li>基于当前流量条件选择最优。这种需要对集群和客户之间的时延和丢包性能做周期性的实时测量</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"5-tcp-套接字编程\"><a class=\"markdownIt-Anchor\" href=\"#5-tcp-套接字编程\">#</a> (5). TCP 套接字编程</h4>\n<blockquote>\n<ul>\n<li>2 种传输层服务的 socket 编程\n<ul>\n<li>TCP：可靠的、字节流服务</li>\n<li>UDP：不可靠 (数据 UDP 数据报) 服务</li>\n</ul>\n</li>\n<li>套接字：应用进程与端到端船速协议 (TCP 或 UDP) 之间的门户</li>\n<li>TCP 服务：从一个进程向另一个进程可靠地传输字节流</li>\n<li>工作过程：<br>\n<img data-src=\"http://lgqimg.changzer.cn/image-20220417160025382.png\" alt=\"image-20220417160025382\"></li>\n<li>两种结构体\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417160815547.png\" alt=\"image-20220417160815547\"></li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417160838113.png\" alt=\"image-20220417160838113\"></li>\n</ul>\n</li>\n<li>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417162204843.png\" alt=\"image-20220417162204843\"> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220417162414038.png\" alt=\"image-20220417162414038\"></li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417162513540.png\" alt=\"image-20220417162513540\"> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220417162527933.png\" alt=\"image-20220417162527933\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"6-udp-套接字编程\"><a class=\"markdownIt-Anchor\" href=\"#6-udp-套接字编程\">#</a> (6). UDP 套接字编程</h4>\n<blockquote>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417162726140.png\" alt=\"image-20220417162726140\"></li>\n<li>\n<ul>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417163109859.png\" alt=\"image-20220417163109859\"> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220417163128298.png\" alt=\"image-20220417163128298\"></li>\n<li><img data-src=\"http://lgqimg.changzer.cn/image-20220417163149229.png\" alt=\"image-20220417163149229\"> &gt; <img data-src=\"http://lgqimg.changzer.cn/image-20220417163210315.png\" alt=\"image-20220417163210315\"></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n",
            "tags": [
                "计算机网络"
            ]
        }
    ]
}