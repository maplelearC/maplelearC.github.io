<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://maplelearc.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://maplelearc.github.io/atom.xml"><link rel="alternate" type="application/json" href="https://maplelearc.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="深入理解计算机系统,CSAPP"><link rel="canonical" href="https://maplelearc.github.io/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/"><meta name="description" content="# CSAPP: 第二章 # 2、信息的表示和处理 计算机使用二值信号存储和表示信息 当计算结果太大以至于不能表示时，就会产生溢出。 浮点数表示的精度有限，因而浮点运算是不可结合的。 整数的表示范围小但是精确，浮点数表示的范围大但是是近似的。 许多安全漏洞是由算术运算的微妙细节导致的。 # 2.1 信息存储 计算机一般使用字节作为最小的可寻址的内存单位。 在机器级程序中不包含关于数据类型的信息。"><meta property="og:type" content="article"><meta property="og:title" content="CSAPP: 第二章"><meta property="og:url" content="https://maplelearc.github.io/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/index.html"><meta property="og:site_name"><meta property="og:description" content="# CSAPP: 第二章 # 2、信息的表示和处理 计算机使用二值信号存储和表示信息 当计算结果太大以至于不能表示时，就会产生溢出。 浮点数表示的精度有限，因而浮点运算是不可结合的。 整数的表示范围小但是精确，浮点数表示的范围大但是是近似的。 许多安全漏洞是由算术运算的微妙细节导致的。 # 2.1 信息存储 计算机一般使用字节作为最小的可寻址的内存单位。 在机器级程序中不包含关于数据类型的信息。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-10-05T07:50:37.000Z"><meta property="article:modified_time" content="2022-10-08T13:23:56.778Z"><meta property="article:author" content="Maple"><meta property="article:tag" content="深入理解计算机系统"><meta property="article:tag" content="CSAPP"><meta name="twitter:card" content="summary"><title>CSAPP: 第二章 - 第二章 - CSAPP | Maple Blog = = 与君初相识，犹如故人归</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">CSAPP: 第二章</h1><div class="meta"><span class="item" title="创建时间：2022-10-05 15:50:37"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-10-05T15:50:37+08:00">2022-10-05</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Maple Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giciundwu5j20zk0m8n9e.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclimtf7dj20zk0m8qav.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giph4wqtg4j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giciukx8a7j20zk0m8aio.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitf0kl1j20zk0m87fe.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicmnywqgpj20zk0m8dwx.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSAPP/" itemprop="item" rel="index" title="分类于 CSAPP"><span itemprop="name">CSAPP</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSAPP/%E7%AC%AC%E4%BA%8C%E7%AB%A0/" itemprop="item" rel="index" title="分类于 第二章"><span itemprop="name">第二章</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://maplelearc.github.io/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar(1).png"><meta itemprop="name" content="Maple"><meta itemprop="description" content="与君初相识，犹如故人归, Maple 的编程学习"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><h1 id="csapp第二章"><a class="anchor" href="#csapp第二章">#</a> CSAPP: 第二章</h1><h2 id="2-信息的表示和处理"><a class="anchor" href="#2-信息的表示和处理">#</a> <strong>2、信息的表示和处理</strong></h2><p>计算机使用二值信号存储和表示信息</p><p>当计算结果太大以至于不能表示时，就会产生<strong>溢出</strong>。</p><p>浮点数表示的精度有限，因而浮点运算是不可结合的。</p><p>整数的表示范围小但是精确，浮点数表示的范围大但是是近似的。</p><p>许多安全漏洞是由算术运算的微妙细节导致的。</p><h2 id="21-信息存储"><a class="anchor" href="#21-信息存储">#</a> <strong>2.1 信息存储</strong></h2><p>计算机一般使用字节作为最小的可寻址的内存单位。</p><p>在机器级程序中不包含关于数据类型的信息。</p><p>指针的值是某个存储块的第一个字节的<strong>虚拟地址</strong>。</p><p><strong>每个程序对象可以视为一个字节块。</strong></p><h3 id="211-十六进制表示法"><a class="anchor" href="#211-十六进制表示法">#</a> <strong>2.1.1 十六进制表示法</strong></h3><p>十六进制以 0x 开头。</p><p>A：10；C:12；F：15</p><h3 id="212-字数据大小"><a class="anchor" href="#212-字数据大小">#</a> <strong>2.1.2 字数据大小</strong></h3><p>每个计算机有对应的字长，虚拟地址用一个字来编码，所以<strong>字长决定了虚拟地址空间的大小</strong>。<strong>64 位机器的指针类型长度为 8 字节</strong></p><p>32 位机器的虚拟地址空间为 <strong>4GB</strong>，64 位字长的虚拟地址空间位 16 EB。</p><p><strong>int32_t</strong> 和 <strong>int64_t</strong> 类型分别为 4 字节和 8 字节，不受机器影响。使用确定大小的整数类型很有用。</p><p>对 32 位和 64 位机器而言，char、short、int、long long 长度都是一样的，为 1，2，4，8。long 的长度不一样。</p><p>float 和 double 的长度一样，分别为 4，8</p><p>程序对 char 有无符号一般不敏感。</p><h3 id="213-寻址和字节顺序"><a class="anchor" href="#213-寻址和字节顺序">#</a> <strong>2.1.3 寻址和字节顺序</strong></h3><p>对于跨越多字节的对象，它的地址是它所用字节中的<strong>最小地址</strong>。</p><p><strong>两种字节存储法：</strong></p><ul><li><strong>小端法</strong>：数字的低位在前（前就是最小地址）</li><li><strong>大端法</strong>：数字的高位在前</li></ul><p>大多数 Intel 都是小端法，不是所有。</p><h3 id="214-表示字符串"><a class="anchor" href="#214-表示字符串">#</a> <strong>2.1.4 表示字符串</strong></h3><p>C 语言字符串是以 null 字符结尾的字符数组，即 '\0'</p><p>ASCII 字符适合编码英文文档。</p><p>Unicode（UTF-8）使用 <strong>4 字节</strong>表示字符，一些常用的字符只需要 1 或 2 个字节。所有 ASCII 字符在 UTF-8 中是一样的。</p><p>JAVA 使用 UTF-8 来编码字符串。</p><h3 id="215-表示代码"><a class="anchor" href="#215-表示代码">#</a> <strong>2.1.5 表示代码</strong></h3><p>二进制代码是<strong>不兼容</strong>的，一般无法在不同机器间移植。</p><p>从机器的角度看，<strong>程序就是一个字节序列</strong>。</p><h3 id="216-布尔代数"><a class="anchor" href="#216-布尔代数">#</a> <strong>2.1.6 布尔代数</strong></h3><p><strong>布尔代数</strong>是在 0 和 1 基础上的定义</p><p>可以把字节看作是一个长为 8 的<strong>位向量</strong>。</p><p>位向量的一个应用是表示有限集合。如位向量 [0110 1001] 表示集合 A = {0,3,5,6}。</p><h3 id="217-c-语言中的位级运算"><a class="anchor" href="#217-c-语言中的位级运算">#</a> <strong>2.1.7 C 语言中的位级运算</strong></h3><p>位运算的常见应用是实现<strong>掩码</strong>。掩码表示从一个字中选出的位的集合，如掩码 0xFF 表示一个字的低 8 位。</p><p>表达式 <strong>~0</strong> 可以生成一个全 1 的掩码，不管机器的字大小是多少。</p><h3 id="218-c-语言中的逻辑运算"><a class="anchor" href="#218-c-语言中的逻辑运算">#</a> <strong>2.1.8 C 语言中的逻辑运算</strong></h3><p>逻辑运算符 &amp;&amp; 和 || 如果第一个参数就能确定结果，就不再计算第二个参数</p><h3 id="219-c-语言中的移位运算"><a class="anchor" href="#219-c-语言中的移位运算">#</a> <strong>2.1.9 C 语言中的移位运算</strong></h3><p>左移 k 位丢掉最高的 k 位，并在右端补 k 个 0。</p><p>右移分为<strong>逻辑右移</strong>和<strong>算术右移</strong>。<strong>逻辑右移左端补 0，算术右移左端补最高有效位的值。</strong></p><p>一般都对有符号数使用算术右移，即补符号位的值。无符号数，<strong>只能是逻辑右移</strong>，即补 0</p><h2 id="22-整数表示"><a class="anchor" href="#22-整数表示">#</a> <strong>2.2 整数表示</strong></h2><p>无符号表示与补码表示</p><p>有符号数到无符号数的转换会产生漏洞，<strong>避免错误的方法之一是绝不使用无符号数</strong>。</p><p>除了 C 以外<strong>很少有语言支持无符号整数</strong>，Java 就只支持有符号数</p><h3 id="221-整数数据类型"><a class="anchor" href="#221-整数数据类型">#</a> <strong>2.2.1 整数数据类型</strong></h3><p>在 64 位系统上</p><ul><li>i<strong>nt</strong>：4 字节，可表示十进制数字位数：<strong>10 位（-20~20 亿以内）</strong></li><li><strong>long long</strong>：8 字节，可表示十进制数字位数：<strong>19 位（千亿亿级）</strong></li><li>long：8 字节</li><li><strong>double</strong>：8 字节，<strong>精度 15 位</strong>，可表示十进制数字位数<strong> 308 位</strong></li><li><strong>float</strong>：4 字节，<strong>精度 6 位</strong>，可表示十进制数字<strong> 38 位</strong></li><li><strong>char</strong>：<strong>-128~127</strong></li></ul><p>java 只支持有符号数。</p><h3 id="222-无符号数的编码"><a class="anchor" href="#222-无符号数的编码">#</a> <strong>2.2.2 无符号数的编码</strong></h3><p>无符号表示、补码表示与数据的映射都是双射，即一一对应。</p><h3 id="223-补码编码"><a class="anchor" href="#223-补码编码">#</a> <strong>2.2.3 补码编码</strong></h3><p>补码的定义实际就是<strong>将符号位解释为负权</strong>。</p><p>C 库头文件 定义了一组常量来限定不同整数数据类型的取值范围。INT_MAX、INT_MIN、UINT_MAX</p><p>C 库头文件 中定义了 uint16_t, int32_t 等类型，用于声明确定宽度类型的整数。</p><p><strong>### 2.2.4 有符号数和无符号数之间的转换</strong></p><p>在有符号数与无符号数之间进行强制类型转换的结果是<strong>保持位值不变，只改变解释位的方式。</strong></p><p><strong>补码 x 转无符号数</strong></p><ul><li>x &gt;= 0，值不变</li><li>x &lt; 0，转换后的值为 2^w + x</li></ul><p><strong>无符号数 x 转补码</strong></p><ul><li>x &lt;2^(w-1)，值不变</li><li>x &gt;= 2^(w-1)，转换后的值为 x - 2^w</li></ul><h3 id="225-c-语言中的有符号数和无符号数"><a class="anchor" href="#225-c-语言中的有符号数和无符号数">#</a> <strong>2.2.5 C 语言中的有符号数和无符号数</strong></h3><p>C 语言中有符号数和无符号数相加减，有符号被转换成无符号。</p><p><strong>### 2.2.6 扩展一个数字的位表示</strong></p><p>扩展无符号数使用零扩展，即在最高位前加 0</p><p>扩展有符号数使用符号扩展，即在最高位前加最高有效位的值</p><p><strong>### 2.2.7 截断数字</strong></p><p>对一个 w 位的数字截断为一个 k 位数字，将丢弃高 w-k 位。</p><p>对于无符号数而言，截断后的数字实际上等于 w mod 2^k，即取余。</p><h2 id="23-整数运算"><a class="anchor" href="#23-整数运算">#</a> <strong>2.3 整数运算</strong></h2><h3 id="231-无符号加法"><a class="anchor" href="#231-无符号加法">#</a> <strong>2.3.1 无符号加法</strong></h3><p>考虑溢出，C 语言不会将溢出作为错误发出信号</p><p>当 x+y &gt;= 2^w，实际结果为 s = x+y-2^w</p><p>对任意的 x+y，<strong>s = (x+y) % 2^w</strong></p><p>** 溢出的结果：** 和小于两个加数</p><p>** 检验溢出的方式：** 如果 <strong>s，说明溢出</strong></p><p><strong>无符号数的非</strong>：~x = 2^w - x (x&gt;0)</p><p><strong>### 2.3.2 补码加法</strong></p><p>当 x+y &gt;= 2^(w-1)， s = x+y-2^w</p><p>当 x+y &lt;-2^(w-1)，s = x+y+2^w</p><p><strong>正溢出的结果是负数，负溢出的结果是正数。</strong></p><p>** 检验溢出的方式：** 当 x,y&gt;0 而 s&lt;=0 是正溢出；当 x,y&lt;0 而 s&gt;=0 是负溢出</p><p><strong>### 2.3.3 补码的非</strong></p><p>当 x = TMin，-x = TMin；当 x ≠ TMin，-x = -x</p><p>** 补码非的位级表示：**<strong> 对每一位求补，结果再加 1</strong></p><p>** 计算补码非的第二种方法：** 假设 k 是最右边的 1 的位置，对 k 左边的所有位取反</p><p><strong>### 2.3.4 无符号乘法</strong></p><p><strong>无符号乘法的积</strong> <strong>m = (x*y) % 2^w</strong></p><h3 id="235-补码乘法"><a class="anchor" href="#235-补码乘法">#</a> <strong>2.3.5 补码乘法</strong></h3><p>可以认为补码乘法和无符号乘法的<strong>位级表示</strong>是一样的</p><p>C 语言在运算时将 x,y 视为无符号数进行乘法运算，结果取余后将其按补码方式解释</p><p><strong>补码乘法的积</strong> <strong>m = (x*y) % 2^w</strong></p><p><strong>### 2.3.6 乘以常数</strong></p><p>大多数机器上，整数乘法需要 <strong>10 个或更多</strong>的时钟周期，而加法、减法、位级运算和移位只需要 1 个时钟周期</p><p><strong>编译器对整数乘法进行优化的方式</strong>：用<strong>移位和加法或减法</strong>运算的组合来代替常数因子的乘法。</p><p>左移 k 位等于乘以 2^k</p><p>如 x * 14 = (x&lt;&lt;3)+(x&lt;&lt;2)+(x&lt;&lt;1) = (x&lt;&lt;4)-(x&lt;&lt;2)</p><p><strong>判断如何移动的方式</strong>很简单：14 的位级表示为 1110，所以分别左移 3，2，1</p><p><strong>### 2.3.7 除以 2 的幂</strong></p><p>大多数机器上，整数除法更慢，需要 <strong>30 个或更多</strong>的始终周期。</p><p>（只有）除以 2 的幂可以用移位运算来代替，<strong>无符号采用<strong><strong>逻辑右移</strong></strong>，补码采用 **** 算术右移</strong></p><p>对于有符号数而言，算术右移的结果相当于进行除法运算后<strong>向下舍入</strong></p><p>使用 <strong>(x+(1&lt;&gt;k</strong> 的结果相当于进行除法运算然后<strong>向零舍入</strong></p><p>代码实现</p><p>​ (x&lt;0 ? x+(1&lt;&lt;k)-1 : x) &gt;&gt; k;</p><h3 id="238-关于整数运算的最后思考"><a class="anchor" href="#238-关于整数运算的最后思考">#</a> <strong>2.3.8 关于整数运算的最后思考</strong></h3><p><strong>补码使用了与无符号算术运算相同的位级实现</strong>，包括加法、减法、乘法甚至除法。都有完全一样或非常类似的位级行为。</p><h2 id="24-浮点数"><a class="anchor" href="#24-浮点数">#</a> <strong>2.4 浮点数</strong></h2><p>浮点数对于非常大，非常接近零，近似值计算都很有用</p><h3 id="241-二进制小数"><a class="anchor" href="#241-二进制小数">#</a> <strong>2.4.1 二进制小数</strong></h3><p>小数的二进制表示法只能表示那些能够写为 <strong>x * 2^w</strong> 的数，<strong>其他的数都是近似表示。x 必须可以由形如 2^i + 2^j + ... + 2^n 的多项式表示</strong></p><p>浮点运算的不精确性可能产生严重后果</p><p><strong>### 2.4.2 IEEE 浮点表示</strong></p><p><strong>IEEE 浮点标准</strong>的表示形式为：<strong>V = (-1)^S * M * 2^E</strong>，它分为三部分：</p><ol><li><strong>符号</strong>：<strong>S</strong> 决定是负数还是正数</li><li><strong>阶码</strong>：<strong>E</strong> 的作用是对浮点数加权</li><li><strong>尾数</strong>：<strong>M</strong> 是一个二进制小数，范围是 1~2-ε 或 0~1-ε</li></ol><p><strong>在对浮点数的位编码</strong>时：</p><ol><li>一个单独的符号位编码直接编码 S</li><li>k 位的<strong>阶码字段 e</strong> 编码 E；float 中 k=8，double 中 <strong>k=11</strong></li><li>n 位的<strong>小数字段 f</strong> 编码 M；float 中 n=23，double 中 <strong>n=52</strong></li></ol><p>E 和 M 的编码方式分为<strong>三种情况</strong>：</p><ol><li><p>** 规格化的值：** 阶码字段即不全为 0 也不全为 1 时属于规格化值（0001~1110）</p></li><li><ol><li>阶码字段解释方式：<strong>E = e - (2^(k-1)-1)</strong>；如 k=4 时，E 的范围是 -6~7；单精度为 -126~127</li><li>小数字段解释方式：<strong>M = 1 + f</strong></li></ol></li><li><p><strong>非规格化的值</strong>：阶码字段全为 0 时属于非规格化形式</p></li><li><ol><li>阶码字段解释方式：<strong>E = 1 - (2^(k-1)-1)</strong>；<strong>与规格化值中 e = 1 时的 E 相同</strong></li><li>小数字段解释方式：<strong>M = f</strong></li></ol></li><li><p>** 特殊值：** 阶码字段全为 1 时，分两种情况：</p></li><li><ol><li><strong>小数字段全为 0：表示无穷</strong></li><li>** 小数字段非零：表示 NaN。** 比如 ∞-∞ 的结果就返回 NaN</li></ol></li></ol><h3 id="243-数字示例"><a class="anchor" href="#243-数字示例">#</a> <strong>2.4.3 数字示例</strong></h3><p>0 有 +0.0 和 -0.0 两种表示方式</p><p>最大非规格化数到最小规格化数的过渡是平滑的。</p><p>浮点数能够使用正数排序函数来排序，即浮点数的位级表示当用整数方式来解释时是顺序的（正数升序负数降序）。</p><p>浮点数可表示的数的分布是不均匀的，越接近零时越稠密</p><p><strong>几个特殊的值的位级表示：</strong></p><ol><li>+0.0 全为 0</li><li>** 最小的正非规格化值：** 最低有效位为 1，其他为 0</li><li>** 最大的非规格化值：** 小数字段全为 1，其他为 0</li><li>** 最小的正规格化值：** 阶码字段最低位为 1，其他为 0</li><li>** 最大的规格化值：** 阶码字段最低位为 0，符号位为 0，其他为 1</li></ol><h3 id="244-舍入"><a class="anchor" href="#244-舍入">#</a> <strong>2.4.4 舍入</strong></h3><p>因为范围和精度有限，浮点运算只能近似表示实数运算。</p><p>在浮点数的近似匹配上，IEEE 浮点格式定义了<strong>四种舍入方式（默认第一种）：</strong></p><ol><li><strong>向偶数舍入（向最接近的值舍入）</strong>：非中间值 (0.5) 四舍五入，中间值向偶数舍入。</li><li>向零舍入</li><li>向下舍入</li><li>向上舍入</li></ol><p>向偶数舍入可以计算一组数的平均数时避免统计偏差。</p><p>实际上这种舍入是发生在二进制小数上的。</p><h3 id="245-浮点运算"><a class="anchor" href="#245-浮点运算">#</a> <strong>2.4.5 浮点运算</strong></h3><p>IEEE 标准定义 1/-0 = -∞，1/+0 = +∞</p><p>浮点运算是<strong>可交换不可结合也不可分配</strong>的。</p><p>浮点加法满足<strong>加法和乘法上的单调性</strong>。如果 a&gt;=b，则 x+a &gt;= x+b</p><p>缺乏结合性和分配性会使一些简单问题变得很复杂</p><h3 id="246-c-语言中的浮点数"><a class="anchor" href="#246-c-语言中的浮点数">#</a> <strong>2.4.6 C 语言中的浮点数</strong></h3><p>在 int、float、double 间进行<strong>强制类型转换时的几种情况：</strong></p><ol><li>int 到 float：不会溢出，可能舍入</li><li>int 或 float 到 double：不会溢出也不会舍入</li><li>double 到 float：可能溢出和舍入</li><li>**float 或 double 到 int：** 向零舍入，很大时可能溢出，很接近零时也可能溢出。当从浮点转换到整数时如果溢出，转变结果都为 [1000]，因此一个正浮点可能得到一个负整数</li></ol><p><strong>把大的浮点数转换为整数是一种常见的错误。</strong></p><p><strong>要小心地使用浮点运算。</strong></p><div class="tags"><a href="/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="ic i-tag"></i> 深入理解计算机系统</a> <a href="/tags/CSAPP/" rel="tag"><i class="ic i-tag"></i> CSAPP</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-10-08 21:23:56" itemprop="dateModified" datetime="2022-10-08T21:23:56+08:00">2022-10-08</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Maple <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="https://maplelearc.github.io/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/" title="CSAPP: 第二章">https://maplelearc.github.io/2022/10/05/CSAPP/《CSAPP：第二章》/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/10/04/Mysql/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciub8ja1j20zk0m81ky.jpg" title="MySql"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> SQL 语言</span><h3>MySql</h3></a></div><div class="item right"><a href="/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%B8%80%E7%AB%A0%E3%80%8B/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipew8gmvyj20zk0m87wh.jpg" title="CSAPP:第一章"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 第一章</span><h3>CSAPP:第一章</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#csapp%E7%AC%AC%E4%BA%8C%E7%AB%A0"><span class="toc-number">1.</span> <span class="toc-text">CSAPP: 第二章</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86"><span class="toc-number">1.1.</span> <span class="toc-text">2、信息的表示和处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2.1 信息存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#211-%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1.1 十六进制表示法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#212-%E5%AD%97%E6%95%B0%E6%8D%AE%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.1.2 字数据大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#213-%E5%AF%BB%E5%9D%80%E5%92%8C%E5%AD%97%E8%8A%82%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.1.3 寻址和字节顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#214-%E8%A1%A8%E7%A4%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.1.4 表示字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#215-%E8%A1%A8%E7%A4%BA%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.1.5 表示代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#216-%E5%B8%83%E5%B0%94%E4%BB%A3%E6%95%B0"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.1.6 布尔代数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#217-c-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BA%A7%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.1.7 C 语言中的位级运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#218-c-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.1.8 C 语言中的逻辑运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#219-c-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.9.</span> <span class="toc-text">2.1.9 C 语言中的移位运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E6%95%B4%E6%95%B0%E8%A1%A8%E7%A4%BA"><span class="toc-number">1.3.</span> <span class="toc-text">2.2 整数表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#221-%E6%95%B4%E6%95%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.2.1 整数数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#222-%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E7%9A%84%E7%BC%96%E7%A0%81"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2.2 无符号数的编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#223-%E8%A1%A5%E7%A0%81%E7%BC%96%E7%A0%81"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.2.3 补码编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#225-c-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E6%9C%89%E7%AC%A6%E5%8F%B7%E6%95%B0%E5%92%8C%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0"><span class="toc-number">1.3.4.</span> <span class="toc-text">2.2.5 C 语言中的有符号数和无符号数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97"><span class="toc-number">1.4.</span> <span class="toc-text">2.3 整数运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#231-%E6%97%A0%E7%AC%A6%E5%8F%B7%E5%8A%A0%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">2.3.1 无符号加法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#235-%E8%A1%A5%E7%A0%81%E4%B9%98%E6%B3%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.3.5 补码乘法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#238-%E5%85%B3%E4%BA%8E%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97%E7%9A%84%E6%9C%80%E5%90%8E%E6%80%9D%E8%80%83"><span class="toc-number">1.4.3.</span> <span class="toc-text">2.3.8 关于整数运算的最后思考</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">2.4 浮点数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#241-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0"><span class="toc-number">1.5.1.</span> <span class="toc-text">2.4.1 二进制小数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#243-%E6%95%B0%E5%AD%97%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.4.3 数字示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#244-%E8%88%8D%E5%85%A5"><span class="toc-number">1.5.3.</span> <span class="toc-text">2.4.4 舍入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#245-%E6%B5%AE%E7%82%B9%E8%BF%90%E7%AE%97"><span class="toc-number">1.5.4.</span> <span class="toc-text">2.4.5 浮点运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#246-c-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-number">1.5.5.</span> <span class="toc-text">2.4.6 C 语言中的浮点数</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/" rel="bookmark" title="CSAPP:第二章">CSAPP:第二章</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Maple" data-src="/images/avatar(1).png"><p class="name" itemprop="name">Maple</p><div class="description" itemprop="description">Maple 的编程学习</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">9</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">9</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">9</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL21hcGxlbGVhcmM=" title="https:&#x2F;&#x2F;github.com&#x2F;maplelearc"><i class="ic i-github"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;about.me&#x2F;yourname"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOm1hcGxlbGVhcmNAZ21haWwuY29t" title="mailto:maplelearc@gmail.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/10/04/Mysql/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%B8%80%E7%AB%A0%E3%80%8B/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/CSAPP/" title="分类于 CSAPP">CSAPP</a> <i class="ic i-angle-right"></i> <a href="/categories/CSAPP/%E7%AC%AC%E4%B8%80%E7%AB%A0/" title="分类于 第一章">第一章</a></div><span><a href="/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%B8%80%E7%AB%A0%E3%80%8B/" title="CSAPP:第一章">CSAPP:第一章</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 计算机语言学习">计算机语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/Lua/" title="分类于 Lua">Lua</a></div><span><a href="/2022/10/08/Lua%E5%AD%A6%E4%B9%A0/" title="Lua入门学习">Lua入门学习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 计算机语言学习">计算机语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/SQL%E8%AF%AD%E8%A8%80/" title="分类于 SQL 语言">SQL 语言</a></div><span><a href="/2022/10/04/Mysql/" title="MySql">MySql</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/2022/10/03/NetWork/%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E6%A6%82%E8%BF%B0/" title="《计算机网络：自定向下》第一章：概述">《计算机网络：自定向下》第一章：概述</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/2022/10/03/NetWork/%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络：自定向下》第二章：应用层">《计算机网络：自定向下》第二章：应用层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/2022/10/03/NetWork/%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82/" title="《计算机网络：自定向下》第三章：传输层">《计算机网络：自定向下》第三章：传输层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSAPP/" title="分类于 CSAPP">CSAPP</a> <i class="ic i-angle-right"></i> <a href="/categories/CSAPP/%E7%AC%AC%E4%BA%8C%E7%AB%A0/" title="分类于 第二章">第二章</a></div><span><a href="/2022/10/05/CSAPP/%E3%80%8ACSAPP%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%8B/" title="CSAPP:第二章">CSAPP:第二章</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 算法和数据结构">算法和数据结构</a></div><span><a href="/2022/10/03/%E7%AE%97%E6%B3%95/" title="算法和数据结构">算法和数据结构</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="分类于 计算机语言学习">计算机语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/C/" title="分类于 C#">C#</a></div><span><a href="/2022/10/03/%E3%80%8ACS%E5%9B%BE%E8%A7%A3%E6%95%99%E7%A8%8B%E3%80%8B%E9%98%85%E8%AF%BB%E8%AE%B0%E5%BF%86%E7%82%B9/" title="《C#图解教程》阅读记忆点">《C#图解教程》阅读记忆点</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Maple @ Maple Blog</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/10/05/CSAPP/《CSAPP：第二章》/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>